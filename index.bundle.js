(()=>{"use strict";$(document).ready((function(){const t=["ESL_SC2","cretetion","be","freecodecamp","storbeck","habathcx","OgamingSC2","RobotCaleb","noobs2ninjas","MOONMOON_OW","Orange_HS","Rainbow6","Ninja"],e="dl6479a69pk17l3s0n0awkn95y4ibk",n=$("#content"),o=$("#searchUser"),a=$("#result"),s=$(".users"),i=$("#usersTemplate"),r="#b478ed",c="#e6d2f9";function l(t,o){const i=`https://id.twitch.tv/oauth2/token?client_id=${e}&client_secret=qslrntsf4ak7p4biazqo2hu7s0mydu&grant_type=client_credentials`;$.ajax({type:"POST",url:i,success:function(i){const{access_token:r}=i,c="https://api.twitch.tv/helix/";let l=setTimeout((function(){"one"==t?(a.empty(),a.html('<div class="users offline">Failed to load information</div>')):(s.remove(),a.empty(),n.html('<div class="users offline">Failed to load information</div>'))}),8e3);const f=o.map((t=>`login=${encodeURIComponent(t)}&`)).join("");$.ajax({type:"GET",url:`${c}users?${f}`,headers:{"Client-ID":e,Accept:"application/vnd.twitchtv.v5+json",Authorization:`Bearer ${r}`},cache:!1,success:function({data:s}){const i=s,f=i.map((t=>`user_id=${t.id}&`)).join("");$.ajax({url:`${c}streams?${f}`,headers:{"Client-ID":e,Accept:"application/vnd.twitchtv.v5+json",Authorization:`Bearer ${r}`},cache:!1,success:function({data:e}){const s=i.map((t=>{const n=e.find((e=>e.user_id===t.id));return{name:t.display_name,urlStream:"https://www.twitch.tv/"+t.display_name,icon:t.profile_image_url,status:n?n.title:"offline"}})),r=o.map((t=>s.find((e=>t.toLowerCase()===e.name.toLowerCase()))||{name:t,urlStream:"https://www.twitch.tv/",icon:"https://thumbsnap.com/i/Rh4aXQqX.png",status:"not found"}));"one"==t?a.html(u(r[0])):"all"==t?r.forEach((t=>{n.append(u(t))})):"online"==t?r.filter((t=>"offline"!==t.status&&"not found"!==t.status)).forEach((t=>n.append(u(t)))):"offline"==t&&r.filter((t=>"offline"===t.status||"not found"===t.status)).forEach((t=>n.append(u(t)))),$("p:contains(offline)").parent().parent().addClass("offline"),$("p:contains(not found)").parent().parent().addClass("offline"),clearTimeout(l)},error:function(t){console.error(t)}})},error:function(t){console.error(t)}})},error:function(t){console.log(t),console.error("Unable to get authorization from API")}})}function u(t){const e=i.html();return Handlebars.compile(e)(t)}var f;Handlebars.registerHelper("ifEquals",(function(t,e,n){return t==e?n.fn(this):n.inverse(this)})),$("#searchForm .typeahead").typeahead({hint:!1,highlight:!1,minLength:1,cache:!1},{name:"users",source:(f=t,function(t,e){let n,o;console.log("it works"),n=[],o=new RegExp(t,"i"),$.each(f,(function(t,e){o.test(e)&&n.push(e)})),e(n)})}),l("all",t),$("#all").css("background-color",r).siblings().css("background-color",c),$(".myButton").on("click",(function(){return s.remove(),n.empty(),a.empty(),$(this).css("background-color",r).siblings().css("background-color",c),l(this.id,t),!1})),$("form").on("submit",(function(){let t=[o.val()];a.empty(),l("one",t)}))}))})();